<!DOCTYPE html>
<html lang="zh-cmn-Hans" xmlns:https="http://www.w3.org/1999/xhtml">
<head>
    <title>StartShopping网站注册</title>
    <meta charset="UTF-8">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <link href="//member-ssl.vipstatic.com/css/public/passport/1/common-hash-153439cd.css" type="text/css" rel="stylesheet">
    <link href="//member-ssl.vipstatic.com/css/public/passport/1/login-hash-9f38e6b2.css" type="text/css" rel="stylesheet">
    <style>
        /*#ff006e*/
    #StartShopping-login{color: #ff006e;width:315px;height:73px;
        font-size: 40px;position: absolute;top: 50px;}
    </style>
</head>
<body class="regSingle  J-container">
<div class="c-header"
     passport_mars_sead_hover>
    <div class="c-header-inner">
        <div class="c-logo">
            <a class=""
               id="StartShopping-login"
               href="#">StartShopping</a>
        </div>

        <div class="c-service"></div>
    </div>
</div>
<div class="c-body  J-ads"
     data-adsid="ADSJ867S"
     data-bg="true" style="background-image: url('https://img.vipstatic.com/upload/flow/2018/06/15/157/15290438491111.jpg');">
    <div class="c-content  f-clearfix">
        <div class="c-register  f-right">
            <div class="c-register-header">
                <div class="c-register-switch-login"
                     passport_mars_sead_hover>
                    已注册可<!--
                     --><a href="/html/denglu.html"
                           id="J_normal_loginlink"
                           class="u-text-highlight">直接登录</a>
                </div>
                <h3 class="c-register-title">会员注册</h3>
            </div>
            <div class="c-register-body">
                <input type="hidden" name="vipc" value="" />
                <div id="reg-form-wrapper">
                    <div class="ui-tips-big ui-tips1 c-register-top-tips hidden">
                        <i class="vipFont if-sigh">&#xe603;</i>
                        <a href="javascript:;" role="button" class="close">&times;</a>
                        <p class="info"><i class="vipFont if-sigh">&#xe603;</i><span class="info-msg"></span></p>
                    </div>

                    <form id="reg_mobile_form" action="/register" method="post" autocomplete="off" class="register-form">
                        <div class="control-group  has-form-item-icon  clearfix">
                            <div class="ui-form-item-group">
                                <input type="text"
                                       class="ui-input ipt-phone" id="J_mobile_name"
                                       name="loginName"
                                       placeholder="请输入手机号码"
                                       passport_mars_sead_hover passport_mars_sead_input='mobileRegMobile'/>
                                <span class="u-input-warning vipFont if-wrong">&#xe621;</span>
                                <span class="u-input-success vipFont if-success">&#xe61e;</span>
                                <span class="c-icon  c-icon-mobile  c-icon-form"></span>
                            </div>
                            <div class="u-input-tip"><span class="text" id="shoujihaomaspan"></span></div>
                        </div>

                        <div class="control-group" id="J_verify_code_mobile"></div>

                        <div class="control-group  has-form-item-icon  clearfix">
                            <div class="ui-form-item-group adjust-tip-icon">
                                <input type="text"
                                       id="J_mobile_code" class="ui-input ipt-verify-code"
                                       name="pvcode"
                                       placeholder="请输入验证码"
                                       passport_mars_sead_hover passport_mars_sead_input='mobileRegMobileCode'/><!--
             --><a
                   role="button"
                   id="J_mobile_verifycode_btn" class="ui-btn-medium  btn-verify-code ui-btn-disable"
                   passport_mars_sead_hover
                   tabIndex="-1">获取验证码</a>
                                <span class="u-input-warning vipFont if-wrong">&#xe621;</span>
                                <span class="u-input-success vipFont if-success">&#xe61e;</span>
                                <span class="c-icon  c-icon-captcha  c-icon-form"></span>
                            </div>
                            <div class="u-input-tip"><span id="yanzhengmaspan" class="text"></span></div>
                        </div>

                        <div class="control-group  has-form-item-icon  clearfix">
                            <div class="ui-form-item-group">
                                <input type="password"
                                       class="ui-input" id="J_mobile_pwd"
                                       name="password"
                                       maxlength="20"
                                       placeholder="密码由6-20位字母，数字和符号组合"
                                       passport_mars_sead_hover
                                       passport_mars_sead_input='mobileRegPw'/>
                                <span class="u-input-warning vipFont if-wrong">&#xe621;</span>
                                <span class="u-input-success vipFont if-success">&#xe61e;</span>
                                <span class="c-icon  c-icon-password  c-icon-form"></span>
                            </div>
                            <div class="u-input-tip">
                <span class="strength-indicator">
                    <span class="indicator-item-bg">
                        <span class="indicator-item"></span>
                    </span>
                    <span class="indicator-text text-weak">弱</span>
                    <span class="indicator-text text-medium">中</span>
                    <span class="indicator-text text-strong">强</span>
                </span><!--
             --><span id="mimaspan" class="text password-tip"></span>
                            </div>
                        </div>

                        <div class="control-group  has-form-item-icon  clearfix">
                            <div class="ui-form-item-group">
                                <input type="password"
                                       class="ui-input confirm-pwd" id="J_mobile_confirm_pwd"
                                       name="confirmPassword"
                                       maxlength="20"
                                       placeholder="请再次输入上面的密码"
                                       passport_mars_sead_hover
                                       passport_mars_sead_input='mobileRegCPw'/>
                                <span class="u-input-warning vipFont if-wrong">&#xe621;</span>
                                <span class="u-input-success vipFont if-success">&#xe61e;</span>
                                <span class="c-icon  c-icon-password  c-icon-form"></span>
                            </div>
                            <div class="u-input-tip"><span id="mimaquerenspan" class="text"></span></div>
                        </div>

                        <div id="tiaokuandiv" class="control-group clearfix">
                            <div class="ui-form-item-group">
                <span class="ui-checkbox mr0">
                    <input type="checkbox" id="J_mobile_agree" name="agree" class="ui-checkbox-normal" value="1">
                    <label id="tiaokuanlabel" for="J_mobile_agree" class="ui-checkbox-simulation"></label>
                </span>
                                <label  for="J_mobile_agree" class="u-provision-txt">我已阅读并接受以下条款：<a href="#" class="u-link" target="_blank" id="J_mobile_provision">《StartShopping服务条款》</a><a href="#" class="u-link" target="_blank">《隐私条款》</a><a href="#" class="u-link" target="_blank">《StartShopping支付用户服务协议》</a><a href="#" class="u-link" target="_blank">《StartShopping信用服务协议》</a></label>
                            </div>
                            <div class="u-input-tip"><span id="tiaokuanspan" class="text"></span></div>
                        </div>

                        <div class="control-group mb30 clearfix">
                            <a  role="button" id="J_mobile_reg_button" class="ui-btn-large ui-btn-primary ui-btn-loading reg-form-btn form-submit" passport_mars_sead_hover>
                                <span class="ui-btn-loading-before">立即注册</span>
                                <span class="ui-btn-loading-after"><i class="ii-loading-gray-16x16"></i><span class="ui-btn-txt">处理中...</span></span>
                            </a>
                        </div>
                    </form>
                </div>
                <script type="text/javascript">
                    var isThirdLogin = false;
                </script>
            </div>
        </div>
    </div>
</div>

<div class="c-footer">
    <p class="c-copyright">Copyright 2008-2018 StartShopping.com，All Rights Reserved ICP证：川 B2-20080329</p>
</div>

<noscript><img src="//mar.vip.com/n" height="1" width="1" border="0" alt="" /></noscript>
</body>
<script src="../js/jquery-3.3.1.min.js"></script>
<script>

    //验证码倒计时 start-------------------------------------------------------------------
    var countdown=60;
    function sendemail(){
        var obj =  $("#J_mobile_verifycode_btn");
        settime(obj);
    }
    function settime(obj) { //发送验证码倒计时
        if (countdown == 0) {
            obj.prop({class:"ui-btn-medium  btn-verify-code ui-btn-secondary"});
            //obj.removeattr("disabled");
            obj.text("获取验证码");
            countdown = 60;
            return;
        } else {
            obj.prop({class:"ui-btn-medium  btn-verify-code ui-btn-disable"});
            obj.text("重新发送(" + countdown + ")");
            countdown--;
        }
        setTimeout(function() {
                settime(obj) }
            ,1000)
    }
    //验证码倒计时 end---------------------------------------------------------------------
    $(function () {
        var shoujihaomatext = $("#J_mobile_name");//手机号码输入框
        var shoujihaomaspan =  $("#shoujihaomaspan");//手机号码输入框下方span
        var huoquyanzhengma = $("#J_mobile_verifycode_btn");//获取验证码按钮
        var yanzhengmatext = $("#J_mobile_code");//验证码输入框
        var yanzhengmaspan = $("#yanzhengmaspan");//验证码输入框下方span
        var mimatext =  $("#J_mobile_pwd");//密码输入框
        var mimaspan = $("#mimaspan");//密码输入框下方span
        var mimaquerentext = $("#J_mobile_confirm_pwd");//密码确认输入框
        var mimaquerenspan = $("#mimaquerenspan");//密码确认输入框下方span
        var tiaokuan = $("#tiaokuanlabel");//条款确认按钮
        var tiaokuandiv = $("#tiaokuandiv");//条款确认按钮总div
        var tiaokuanspan = $("#tiaokuanspan");//条款确认按钮下方span
        // 手机号码输入框 start------------------------------------------------------------
        function checkPhoneIsExist() {
            var shoujihaoma = shoujihaomatext.val();
            var json = {option:"1",shoujihaoma:""+shoujihaoma+""};
            var count = null;
            $.ajax({
                url:"/ZhuCeServlet",   // 请求路径
                type:"post",            // 请求的方式，不区分大小写
                async:false,             // 是否异步，true是默认值，false为同步请求
                cache:false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                contentType:"application/json;charset=utf-8",
                datatype:"json",        // 返回类型，text文本、html页面、json数据
                data:JSON.stringify(json),
                success:function(response){//回调函数
                count = response.panduancount;
                },
                error:function(response){//回调函数
                }
            });
            return count;
        }//利用ajax异步判断手机号码是否已被注册
        shoujihaomatext.focus(function(){
            shoujihaomaspan.html("<font>11位数的手机号码</font>");
        });//手机号码输入框获得焦点时
        shoujihaomatext.blur(function(){
            //正则 判断手机号码是否有效
            var myreg = /^(((13[0-9]{1})|(14[0-9]{1})|(17[0]{1})|(15[0-3]{1})|(15[5-9]{1})|(18[0-9]{1}))+\d{8})$/;
            var shoujihaoma = shoujihaomatext.val();
            var action = false;
            var message = "";
            if(shoujihaoma == ''){
                message = "手机号码不能为空！";
            }else if(shoujihaoma.length !=11 || !myreg.test(shoujihaoma)){
                message = "请输入有效的手机号码！";
            }else if(checkPhoneIsExist() == 1){
                message = "该手机号码已经被绑定！";
            }else {
                message = "有效的手机号码";
                action = true;
            }
            if(!action){
                shoujihaomaspan.html("<font color='#f64a4a'>"+message+"</font>");
                shoujihaomatext.css({"border-color":"#f64a4a"});
                huoquyanzhengma.prop({class:"ui-btn-medium  btn-verify-code ui-btn-disable"});
            }else {
                shoujihaomaspan.html("<font>"+message+"</font>");
                shoujihaomatext.css({"border-color":"#ccc"});
                huoquyanzhengma.prop({class:"ui-btn-medium  btn-verify-code ui-btn-secondary"});
            }
            });//手机号码输入框失去焦点时
       // 手机号码输入框 end---------------------------------------------------------------
        //ui-btn-secondary 按钮可用   ui-btn-disable 按钮禁用
       //获取验证码按钮 start--------------------------------------------------------------
        var shoujiyanzhengmahuidiao = null;
        huoquyanzhengma.click(function () {
            if(huoquyanzhengma.text() == "获取验证码" &&
                huoquyanzhengma.css("color") == "rgb(224, 0, 120)"){
                var shoujihaoma = shoujihaomatext.val();
                var json = {option:"2",shoujihaoma:""+shoujihaoma+""};
                $.ajax({
                    url:"/ZhuCeServlet",   // 请求路径
                    type:"post",            // 请求的方式，不区分大小写
                    async:false,             // 是否异步，true是默认值，false为同步请求
                    cache:false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                    contentType:"application/json;charset=utf-8",
                    datatype:"json",        // 返回类型，text文本、html页面、json数据
                    data:JSON.stringify(json),
                    success:function(response){//回调函数
                        shoujiyanzhengmahuidiao = response.shoujiyanzhengma;//将验证码赋值，用于判断用户是否输入正确
                    },
                    error:function(response){//回调函数
                    }
                });
                sendemail();
                yanzhengmaspan.html("<font color='#f64a4a'>若未收到验证短信,请稍后重试</font>");
            }
        });//获取验证码按钮点击时
        yanzhengmatext.blur(function () {
            var yanzhengma = yanzhengmatext.val();
            if(yanzhengma == ""){
                yanzhengmaspan.html("<font color='#f64a4a'>请输入6位数字手机验证码</font>");
                yanzhengmatext.css({"border-color":"#f64a4a"});
            }else if(yanzhengma != shoujiyanzhengmahuidiao){
                yanzhengmaspan.html("<font color='#f64a4a'>验证码错误</font>");
                yanzhengmatext.css({"border-color":"#f64a4a"});
            }else {
                yanzhengmaspan.html("<font>验证码正确</font>");
                yanzhengmatext.css({"border-color":"#ccc"});
            }
        });//验证码输入框失去焦点时
       //获取验证码按钮 end----------------------------------------------------------------
       //密码(确认)输入框 start------------------------------------------------------------
        mimatext.focus(function () {
            mimaspan.html("<font>密码区分大小写</font>");
        });//密码输入框获得焦点时
        mimatext.blur(function () {
            var mima = mimatext.val();
            if(mima == ""){
            mimaspan.html("<font  color='#f64a4a'>密码不能为空</font>");
            mimatext.css({"border-color":"#f64a4a"});
            }else if(mima.length < 6 || mima.length > 20){
            mimaspan.html("<font  color='#f64a4a'>请输入6-20位密码</font>");
            mimatext.css({"border-color":"#f64a4a"});
            }else {
            mimaspan.html("<font>可用的密码</font>");
            mimatext.css({"border-color":"#ccc"});
            }
        });//密码输入框失去焦点时
        mimaquerentext.blur(function () {
          var mima = mimatext.val();
          var mimaqueren = mimaquerentext.val();
          if(mimaqueren == ""){
              mimaquerenspan.html("<font  color='#f64a4a'>不能为空</font>");
              mimaquerentext.css({"border-color":"#f64a4a"});
          }else if(mima != mimaqueren){
              mimaquerenspan.html("<font  color='#f64a4a'>密码不一致</font>");
              mimaquerentext.css({"border-color":"#f64a4a"});
          }else {
              mimaquerenspan.html("<font>密码一致</font>");
              mimaquerentext.css({"border-color":"#ccc"});
          }
        });//密码确认输入框失去焦点时
       //密码(确认)输入框 end--------------------------------------------------------------
       //条款确认按钮 start----------------------------------------------------------------
        var tiaokuanaction = true;//状态机
         tiaokuan.click(function () {
             if(tiaokuanaction == false){//未接收服务条款
                 tiaokuanspan.html("<font  color='#f64a4a'>接收服务条款才能注册</font>");
                 tiaokuandiv.prop({class:"control-group clearfix z-u-form-item-warning"});
                 tiaokuanaction = true;
             }else if(tiaokuanaction == true){//接收服务条款
                 tiaokuanspan.html("");
                 tiaokuandiv.prop({class:"control-group clearfix z-u-form-item-success"});
                 tiaokuanaction = false;
             }
         });//条款确认按钮点击事件
       //条款确认按钮 end------------------------------------------------------------------
       // 注册按钮 start-------------------------------------------------------------------
        var zhuce = $("#J_mobile_reg_button");//注册按钮(a标签)
        zhuce.click(function () {
            if(shoujihaomaspan.text() == "有效的手机号码" &&
                yanzhengmaspan.text() == "验证码正确" &&
                mimaspan.text() == "可用的密码" &&
                mimaquerenspan.text() == "密码一致" &&
                tiaokuandiv.prop("class") == "control-group clearfix z-u-form-item-success"){//注册提交

                var json = {option:"3",shoujihaoma:""+shoujihaomatext.val()+"",mima:""+mimatext.val()+""};
                var action = false;//false为不存在
                $.ajax({
                    url:"/ZhuCeServlet",   // 请求路径
                    type:"post",            // 请求的方式，不区分大小写
                    async:true,             // 是否异步，true是默认值，false为同步请求
                    cache:false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                    contentType:"application/json;charset=utf-8",
                    datatype:"json",        // 返回类型，text文本、html页面、json数据
                    data:JSON.stringify(json),
                    success:function(response){//回调函数
                        location.href = response.url;
                    },
                    error:function(response){//回调函数
                    }
                });

            }else if(shoujihaomaspan.text() != "有效的手机号码"){
                shoujihaomatext.css({"border-color":"#f64a4a"});
                shoujihaomaspan.html("<font color='#f64a4a'>请输入有效的手机号码</font>");
            }else if(yanzhengmaspan.text() != "验证码正确"){
                yanzhengmatext.css({"border-color":"#f64a4a"});
                yanzhengmaspan.html("<font color='#f64a4a'>请输入正确验证码</font>");
            }else if(mimaspan.text() != "可用的密码"){
                mimatext.css({"border-color":"#f64a4a"});
                mimaspan.html("<font color='#f64a4a'>请输入可用的密码</font>");
            }else if(mimaquerenspan.text() != "密码一致"){
                mimaquerentext.css({"border-color":"#f64a4a"});
                mimaquerenspan.html("<font color='#f64a4a'>请确认密码一致</font>");
            }else if(tiaokuandiv.prop("class") != "control-group clearfix z-u-form-item-success"){
                tiaokuanspan.html("<font  color='#f64a4a'>接收服务条款才能注册</font>");
            }
        });//注册按钮点击事件
       // 注册按钮 end---------------------------------------------------------------------
    });
</script>
</html>
