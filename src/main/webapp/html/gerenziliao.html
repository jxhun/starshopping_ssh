<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>StartShopping-我的资料</title>
    <meta name="keywords" content="StartShopping,打折,品牌折扣,限时抢购,特卖"/>
    <meta name="description"
     content="StartShopping购物网以1-7折超低折扣对全球各大品牌进行限时特卖，商品囊括服装、化妆品、家居、奢侈品等上千品牌。100%正品、低价、货到付款、7天无理由退货。"/>
    <link rel="stylesheet" type="text/css" href="//member.vipstatic.com/css/public/myi/1/sidebar-hash-de660973.css">
    <link rel="stylesheet" type="text/css" href="//member.vipstatic.com/css/public/myi/1/common-hash-d334948a.css">
    <!--BootStrap-->
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/bootstrap-theme.min.css">
    <!--选择城市-->
    <link href="../selectcity/css/jquery.city.css" rel="stylesheet" />
    <link href="../selectcity/css/animate.min.css" rel="stylesheet" />
    <style>
        .form-horizontal {
            margin-left: 50px;
            margin-right: 50px;
            margin-top: 20px;
        }

        #yhmsjhm {
            display: inline-block;
            position: relative;
            left: 0px;
            bottom: 0px;
        }

        #xinzeng, #gerenziliaotijiao {
            position: relative;
            left: 200px;
        }
    </style>
</head>
<body>
<link charset="utf-8" type="text/css" rel="stylesheet"
      href="//member.vipstatic.com/css/public/myi/1/user/common-hash-480195ea.css">
<link charset="utf-8" type="text/css" rel="stylesheet"
      href="//member.vipstatic.com/css/public/myi/1/info-hash-e70cdbb9.css">
<link charset="utf-8" type="text/css" rel="stylesheet"
      href="//member.vipstatic.com/css/public/myi/1/user/trade-hash-9fac3bd8.css">
<div class="m-body">
    <div class="m-common-wrap">
        <accountContent class="m-wrap-left">
        </accountContent>
        <div class="m-wrap-right">
            <div class="sub-title">
                <h3><a id="StartShopping">StartShopping&nbsp;</a><span class="split">&gt;&nbsp;</span>我的资料&nbsp;<span class="split">&gt;&nbsp;</span>
                    <span id="activeTabName">基本资料</span></h3>
            </div>
            <div class="account">
                <div class="accountTabs">
                    <div id="tabBasicinfo" mars_sead="285|2|1|1" class="tab active">基本资料</div>
                    <div id="tabSurvey" mars_sead="285|2|1|2" class="tab">收货地址</div>
                </div>
                <!--头像-->
                <div id="touxiangdiv" style="position: relative;left: 100px;">
                    <img data-toggle="modal" data-target="#myModal_img" id="touxiangimg" src="" class="img-circle"
                         style="width: 80px;height: 80px">
                    <div class="modal fade" id="myModal_img" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                         aria-hidden="true">
                        <!--  modal-lg和modal-sm控制大小  不使用这两个属性是默认大小  如果觉得默认的三种设置不够，可以自己书写style width-->
                        <div class="modal-dialog" style="width: 400px">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                        &times;
                                    </button>
                                    <h4 class="modal-title" id="myModalLabel01" style="color: #ff006e">
                                        头像上传
                                    </h4>
                                </div>
                                <div class="modal-body">
                                    <!--  控制div的大小，核心控制 col-sm控制占几列，col-sm-offset控制从左开始，偏移几列 -->
                                    <div id="" class="input-group col-sm-10 col-sm-offset-1">
                                        <form id="fileuploadForm" method="post" enctype="multipart/form-data">
                                            <input style="width: 250px;" id='location' class="form-control" disabled>
                                            <input style="background-color: #f8f8f8;border-color: #ff006e;color: #ff006e"
                                                   type="button" id="i-check" value="浏览" class="btn"
                                                   onclick="$('#i-file').click();">
                                            <input type="file" name="file01" id='i-file' accept=".nse"
                                                   onchange="$('#location').val($('#i-file').val());"
                                                   style="display: none">
                                        </form>
                                    </div>
                                    <br>
                                </div>
                                <div class="modal-footer">
                                    <button id="touxiangshangchuantijiao" type="button" class="btn">
                                        提交
                                    </button>
                                    <span id="touxiangtijiaogensui"></span>
                                </div>
                            </div><!-- /.modal-content -->
                        </div><!-- /.modal -->
                    </div>
                    <div id="yhmsjhm">
                        <span id="txyonghumingspan"></span>(<span id="txshoujispan"></span>)
                    </div>
                </div>
                <!--分割线-->
                <hr class="simple" width="80%" color="#F6007C"/>

                <div id="accountContent" class="accountContent">
                    <!--个人资料-->
                    <div id="gerenziliaodiv" class="accountBasicinfo tab-content active">
                        <div class="row">
                            <div class="col-sm-12">
                                <form id="gerenziliaofrom" class="form-horizontal" role="form">
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">
                                            用户名
                                        </label>
                                        <div class="col-sm-5">
                                            <input name="yonghuming" id="yonghumingtext" disabled class="form-control"
                                                   type="text" placeholder="">
                                        </div>
                                        <label class="control-label">
                                            <a id="shezhia" style="color: #f10180">设置</a>
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">
                                            昵称
                                        </label>
                                        <div class="col-sm-5">
                                            <input name="nicheng" id="nichengtext" class="form-control" type="text"
                                                   placeholder="">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">
                                            姓名
                                        </label>
                                        <div class="col-sm-5">
                                            <input name="xingming" id="xingmingtext" class="form-control" type="text"
                                                   placeholder="">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">
                                            性别
                                        </label>
                                        <div class="col-sm-5">
                                            <label class="radio-inline">
                                                <input type="radio" class="radio" name="xingbie" id="男" value="">男
                                            </label>
                                            <label class="radio-inline">
                                                <input type="radio" class="radio" name="xingbie" id="女" value="">女
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">
                                            出生日期
                                        </label>
                                        <div class="col-sm-5">
                                            <input type="text" name="chushengriqi" class="form-control"
                                                   placeholder="请选择日期" id="chushengriqitext">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">
                                            星座
                                        </label>
                                        <div class="col-sm-3">
                                            <select id="xingzuo" name="xingzuo" class="form-control col-sm-3">
                                                 <option value="白羊座">白羊座</option>
                                                <option value="金牛座">金牛座</option>
                                                <option value="双子座">双子座</option>
                                                <option value="巨蟹座">巨蟹座</option>
                                                <option value="狮子座">狮子座</option>
                                                <option value="处女座">处女座</option>
                                                <option value="天秤座">天秤座</option>
                                                <option value="天蝎座">天蝎座</option>
                                                <option value="射手座">射手座</option>
                                                <option value="摩羯座">摩羯座</option>
                                                <option value="水瓶座">水瓶座</option>
                                                <option value="双鱼座">双鱼座</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">
                                            居住地
                                        </label>
                                        <div class="col-sm-5">
                                            <input name="jvzhudi" id="jvzhuditext" class="form-control" type="text"
                                                   placeholder="">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">
                                            家乡
                                        </label>
                                        <div class="col-sm-5">
                                            <input name="jiaxiang" id="jiaxiangtext" class="form-control" type="text"
                                                   placeholder="">
                                        </div>
                                    </div>
                                </form>
                                <button style="width: 120px;background-color: #ff0045"
                                        type="button"
                                        class="btn btn-primary btn-lg active"
                                        id="gerenziliaotijiao">提交
                                </button>
                            </div>
                        </div>
                    </div>
                    <!--收货地址-->
                    <div id="shouhuodizhidiv" class="accountSurvey tab-content">
                        <div class="row">
                            <div class="col-sm-12">
                                <div style="position: relative;left: 170px;" id="buquantishidiv"></div>
                                <form id="shouhuodizhifrom" class="form-horizontal" role="form">
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">
                                            收货人
                                        </label>
                                        <div class="col-sm-5">
                                            <input id="shouhuorentext" class="form-control" type="text" placeholder="">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">
                                            所在地区
                                        </label>
                                        <div class="col-sm-5">
                                            <input id="suozaidiqutext" class="form-control" type="text"
                                                   placeholder="省，市">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">
                                            邮编
                                        </label>
                                        <div class="col-sm-5">
                                            <input id="youbiantext" class="form-control" type="text" placeholder="">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">
                                            详细地址
                                        </label>
                                        <div class="col-sm-5">
                                            <textarea id="xiangxidizhitext" class="form-control" rows="3"></textarea>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">
                                            联系电话
                                        </label>
                                        <div class="col-sm-5">
                                            <input id="lianxidianhuatext" class="form-control" type="text"
                                                   placeholder="">
                                        </div>
                                    </div>
                                </form>
                                <button style="width: 120px;background-color: #ff0045;"
                                        type="button"
                                        class="btn btn-primary btn-lg active"
                                        id="xinzeng">新增
                                </button>
                                <!--分割线-->
                                <hr class="simple" width="80%" color="#F6007C"/>
                                <!--收货地址table-->
                                <table id="mytable" class="table table-striped table-bordered table-hover">
                                    <thead>
                                    <tr>
                                        <th>收货人</th>
                                        <th>所在地区</th>
                                        <th>邮编</th>
                                        <th>联系电话</th>
                                        <th>详细地址</th>
                                        <th>修改</th>
                                        <th>删除</th>
                                        <th>&nbsp;&nbsp;&nbsp;</th>
                                    </tr>
                                    </thead>
                                    <tbody id="mytbody">
                                    </tbody>
                                </table>
                                <!--分页-->
                                <div class="row">
                                    <div class="col-md-offset-3">
                                        <ul class="pagination">
                                            <li class="" id="shouyeli"><a id="shouye">首页</a></li>
                                            <li class="" id="shangyiyeli"><a id="shangyiye">&laquo;</a></li>
                                            <!--<li class="yeshuanniu" id=""+i+""><a>1</a></li>-->
                                            <li class="" id="xiayiyeli"><a id="xiayiye">&raquo;</a></li>
                                            <li class="" id="moyeli"><a id="moye">末页</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script src="../js/jquery-3.3.1.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../laydate/laydate.js"></script>
<script src="../selectcity/js/jquery.city.js"></script>
<script>
    //日期组件 start------------------------------------------------------
    lay('#version').html('-v' + laydate.v);
    //执行一个laydate实例
    laydate.render({
        elem: '#chushengriqitext' //指定元素
    });
    //日期组件 end--------------------------------------------------------
    $(function () {

        //城市选择 start--------------------------------------------------------
        $('#jvzhuditext').jcity({
            urlOrData: '../selectcity/js/citydata.json',
            animate: { showClass: 'animated flipInX', hideClass: 'animated flipOutX' },
            onChoice: function (data) {
                console.log(data);
            }
        });
        $('#jiaxiangtext').jcity({
            urlOrData: '../selectcity/js/citydata.json',
            animate: { showClass: 'animated flipInX', hideClass: 'animated flipOutX' },
            onChoice: function (data) {
                console.log(data);
            }
        });
        $('#suozaidiqutext').jcity({
            urlOrData: '../selectcity/js/citydata.json',
            animate: { showClass: 'animated flipInX', hideClass: 'animated flipOutX' },
            onChoice: function (data) {
                console.log(data);
            }
        });
        //城市选择 end--------------------------------------------------------

        $("#StartShopping").click(function () {
            window.location.href = "/html/index.html?yonghuming="+gerenziliao_yonghuming+"";
        });
        $("input.radio").click(function () {
            $("input.radio").val("" + $(this).prop("id") + "");
        });//radio选择
        var gerenziliao_yonghuming = decodeURI(window.location.search.substring(12));//此时用户的用户名*******
        $("#shezhia").click(function () {
           window.location.href = "/html/shezhi.html?yonghuming="+gerenziliao_yonghuming;
        });//设置超链接点击事件
        function xieru(obj) {
            var returnxieru = "";
            if(obj != "" && obj != null && obj != undefined && obj != NaN){
                returnxieru = obj;
            }
            return returnxieru;
        };//检查是否为空
        function touxiangxieru(obj) {
            var returnxieru = "";
            if(obj != "" && obj != null && obj != undefined && obj != NaN){
                returnxieru = obj;
                return returnxieru;
            }
        };//检查头像是否为空
        function xingbiexieru(obj) {
            var returnxieru = "--";
            if(obj != "" && obj != null && obj != undefined && obj != NaN){
                returnxieru = obj;
            }
            return returnxieru;
        };//检查性别
        function selectYongHuAndShouHuoDiZhi() {
            var yeshu = 1;
            var json = {option: "1", yonghuming: "" + gerenziliao_yonghuming + ""};
            $.ajax({
                url: "/GeRenZiLiaoServlet",   // 请求路径
                type: "post",            // 请求的方式，不区分大小写
                async: true,             // 是否异步，true是默认值，false为同步请求
                cache: false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                contentType: "application/json;charset=utf-8",
                datatype: "json",        // 返回类型，text文本、html页面、json数据
                data: JSON.stringify(json),
                success: function (response) {//回调函数
                    var shoujihaoma =
                        response.kehudenglu.shoujihaoma.substring(0, 3) + "*****" + response.kehudenglu.shoujihaoma.substring(8, 11);
                    //head
                    $("#touxiangimg").prop({"src": touxiangxieru(response.yonghu.touxiang)});
                    $("#txyonghumingspan").text("" + xieru(response.yonghu.nicheng) + "");
                    $("#txshoujispan").text("" + shoujihaoma + "");
                    //个人资料form
                    $("#yonghumingtext").val("" + gerenziliao_yonghuming + "");
                    $("#nichengtext").val("" + xieru(response.yonghu.nicheng) + "");
                    $("#xingmingtext").val("" + xieru(response.yonghu.xingming) + "");
                    $("#" + xingbiexieru(response.yonghu.xingbie) + "").attr({"checked": "true"});//性别
                    $("input.radio").val("" + xingbiexieru(response.yonghu.xingbie) + "");//性别
                    $("#chushengriqitext").val("" + xieru(response.yonghu.chushengriqi) + "");
                    $("#xingzuo").val("" + xieru(response.yonghu.xingzuo) + "");//星座
                    $("#jvzhuditext").val("" + xieru(response.yonghu.jvzhudi) + "");
                    $("#jiaxiangtext").val("" + xieru(response.yonghu.jiaxiang) + "");
//收货地址 table*********************************************************************
                    function tableff() {
                        var jsonArray = response.shouhuodizhi;//后端返回的shouhuodizhi收货地址表的jsonArray
                        $("#mytbody").empty();
                        $("li.yeshuli").remove();
                        var thisid = $(this).prop("id");
                        var thistext = $(this).text();
                        var zongtiaoshu = jsonArray.length;
                        var zongyeshu = Math.floor((zongtiaoshu - 1) / 5) + 1;//如果每页规定显示5条记录
                        if (thisid != "" && thisid != null && thisid != "undefind") {
                            if (thisid == "shouye") {
                                yeshu = 1;
                            } else if (thisid == "shangyiye") {
                                yeshu = yeshu == 1 ? 1 : yeshu - 1;
                            } else if (thisid == "xiayiye") {
                                yeshu = yeshu == zongyeshu ? zongyeshu : yeshu + 1;
                            } else if (thisid == "moye") {
                                yeshu = zongyeshu;
                            } else if (thisid == "tijiaobutton") {
                                yeshu = 1;
                            } else {
                                yeshu = thistext;
                            }
                        }
                        // 最有一页 i = 15 ; i< 20 ;i++  但是i的最大值小于 20。
                        var iyeshu = 5 * yeshu > zongtiaoshu ? zongtiaoshu : 5 * yeshu;
                        for (var i = (yeshu - 1) * 5; i < iyeshu; i++) {
                            if (jsonArray[i].zhuangtai == 1) {//是默认地址 zhuangtai = 1
                                $("#mytbody").append("<tr id='tdtr"+i+"'>" +
                                    "<td><input id='table_shouhuoren" + i + "' style='width: 70px;' class='form-control input-sm' type='text' value=" + jsonArray[i].shouhuoren + "></td>" +
                                    "<td><input id='table_suozaidiqu" + i + "' style='width: 70px;' class='form-control input-sm' type='text' value=" + jsonArray[i].suozaidiqu + "></td>" +
                                    "<td><input id='table_youbian" + i + "' style='width: 70px;' class='form-control input-sm' type='text' value=" + jsonArray[i].youbian + "></td>" +
                                    "<td><input id='table_lianxidianhua" + i + "' style='width: 100px;' class='form-control input-sm' type='text' value=" + jsonArray[i].lianxidianhua + "></td>" +
                                    "<td><input id='table_xiangxidizhi" + i + "' style='width: 160px;' class='form-control input-sm' type='text' value=" + jsonArray[i].xiangxidizhi + "></td>" +
                                    "<td><a id='xiugai" + i + "'>修改</a></td>" +
                                    "<td><a id='shanchu" + i + "'>删除</a></td>" +
                                    "<td>默认地址</td>" +
                                    "</tr>");
                                $("#xiugai" + i + "").click(function () {
                                    var count = $(this).prop("id").substring(6);
                                    var json = {
                                        option: "5",
                                        yonghuming: "" + response.kehudenglu.yonghuming + "",
                                        id: "" + jsonArray[count].id + "",
                                        shouhuoren: "" + $("#table_shouhuoren" + count + "").val() + "",
                                        suozaidiqu: "" + $("#table_suozaidiqu" + count + "").val() + "",
                                        youbian: "" + $("#table_youbian" + count + "").val() + "",
                                        xiangxidizhi: "" + $("#table_xiangxidizhi" + count + "").val() + "",
                                        lianxidianhua: "" + $("#table_lianxidianhua" + count + "").val() + ""
                                    };
                                    $.ajax({
                                        url: "/GeRenZiLiaoServlet",   // 请求路径
                                        type: "post",            // 请求的方式，不区分大小写
                                        async: true,             // 是否异步，true是默认值，false为同步请求
                                        cache: false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                                        contentType: "applicaton/json;charset=utf-8",
                                        datatype: "json",        // 返回类型，text文本、html页面、json数据
                                        data: JSON.stringify(json),
                                        success: function (response) {//回调函数
                                        },
                                        error: function (response) {//回调函数
                                        }
                                    });
                                });//修改点击事件
                                $("#shanchu" + i + "").click(function () {
                                    var count = $(this).prop("id").substring(7);
                                    var json = {
                                        option: "6",
                                        yonghuming: "" + response.kehudenglu.yonghuming + "",
                                        id: "" + jsonArray[count].id + ""
                                    };
                                    $.ajax({
                                        url: "/GeRenZiLiaoServlet",   // 请求路径
                                        type: "post",            // 请求的方式，不区分大小写
                                        async: true,             // 是否异步，true是默认值，false为同步请求
                                        cache: false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                                        contentType: "applicaton/json;charset=utf-8",
                                        datatype: "json",        // 返回类型，text文本、html页面、json数据
                                        data: JSON.stringify(json),
                                        success: function (response) {//回调函数
                                            $("#tdtr"+count+"").remove();
                                        },
                                        error: function (response) {//回调函数
                                        }
                                    });
                                });//删除点击事件
                            } else {//不是默认地址 zhuangtai != 1
                                $("#mytbody").append("<tr id='tdtr"+i+"'>" +
                                    "<td><input id='table_shouhuoren" + i + "' style='width: 70px;' class='form-control input-sm' type='text' value=" + jsonArray[i].shouhuoren + "></td>" +
                                    "<td><input id='table_suozaidiqu" + i + "' style='width: 70px;' class='form-control input-sm' type='text' value=" + jsonArray[i].suozaidiqu + "></td>" +
                                    "<td><input id='table_youbian" + i + "' style='width: 70px;' class='form-control input-sm' type='text' value=" + jsonArray[i].youbian + "></td>" +
                                    "<td><input id='table_lianxidianhua" + i + "' style='width: 100px;' class='form-control input-sm' type='text' value=" + jsonArray[i].lianxidianhua + "></td>" +
                                    "<td><input id='table_xiangxidizhi" + i + "' style='width: 160px;' class='form-control input-sm' type='text' value=" + jsonArray[i].xiangxidizhi + "></td>" +
                                    "<td><a id='xiugai" + i + "'>修改</a></td>" +
                                    "<td><a id='shanchu" + i + "'>删除</a></td>" +
                                    "<td id='shemotd"+i+"'><a id='shemo" + i + "'>设为默认</a></td>" +
                                    "</tr>");
                                $("#xiugai" + i + "").click(function () {
                                    var count = $(this).prop("id").substring(6);
                                    var json = {
                                        option: "5",
                                        yonghuming: "" + response.kehudenglu.yonghuming + "",
                                        id: "" + jsonArray[count].id + "",
                                        shouhuoren: "" + $("#table_shouhuoren" + count + "").val() + "",
                                        suozaidiqu: "" + $("#table_suozaidiqu" + count + "").val() + "",
                                        youbian: "" + $("#table_youbian" + count + "").val() + "",
                                        xiangxidizhi: "" + $("#table_xiangxidizhi" + count + "").val() + "",
                                        lianxidianhua: "" + $("#table_lianxidianhua" + count + "").val() + ""
                                    };
                                    $.ajax({
                                        url: "/GeRenZiLiaoServlet",   // 请求路径
                                        type: "post",            // 请求的方式，不区分大小写
                                        async: true,             // 是否异步，true是默认值，false为同步请求
                                        cache: false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                                        contentType: "applicaton/json;charset=utf-8",
                                        datatype: "json",        // 返回类型，text文本、html页面、json数据
                                        data: JSON.stringify(json),
                                        success: function (response) {//回调函数
                                        },
                                        error: function (response) {//回调函数
                                        }
                                    });
                                });//修改点击事件
                                $("#shanchu" + i + "").click(function () {
                                    var count = $(this).prop("id").substring(7);
                                    var json = {
                                        option: "6",
                                        yonghuming: "" + response.kehudenglu.yonghuming + "",
                                        id: "" + jsonArray[count].id + ""
                                    };
                                    $.ajax({
                                        url: "/GeRenZiLiaoServlet",   // 请求路径
                                        type: "post",            // 请求的方式，不区分大小写
                                        async: true,             // 是否异步，true是默认值，false为同步请求
                                        cache: false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                                        contentType: "applicaton/json;charset=utf-8",
                                        datatype: "json",        // 返回类型，text文本、html页面、json数据
                                        data: JSON.stringify(json),
                                        success: function (response) {//回调函数
                                             $("#tdtr"+count+"").remove();
                                        },
                                        error: function (response) {//回调函数
                                        }
                                    });
                                });//删除点击事件
                                $("#shemo" + i + "").click(function () {
                                    var count = $(this).prop("id").substring(5);
                                    var json = {
                                        option: "7",
                                        yonghuming: "" + response.kehudenglu.yonghuming + "",
                                        id: "" + jsonArray[count].id + "",
                                        zhuangtai: 1
                                    };
                                    $.ajax({
                                        url: "/GeRenZiLiaoServlet",   // 请求路径
                                        type: "post",            // 请求的方式，不区分大小写
                                        async: true,             // 是否异步，true是默认值，false为同步请求
                                        cache: false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                                        contentType: "applicaton/json;charset=utf-8",
                                        datatype: "json",        // 返回类型，text文本、html页面、json数据
                                        data: JSON.stringify(json),
                                        success: function (response) {//回调函数
                                             $("#shemotd"+count+"").html("<font color='#ff0045'>最新默认</font>");
                                        },
                                        error: function (response) {//回调函数
                                        }
                                    });
                                });//设为默认点击事件
                            }
                        }
                        for (var x = 1; x < zongyeshu + 1; x++) {
                            $("#xiayiyeli").before("<li class='yeshuli' id='yeshu" + x + "'><a class='' id='a" + x + "'>" + x + "</a></li>");
                            if (x == yeshu) {
                                $("#a" + x + "").html("<font color='#f64a4a'>" + x + "</font>");
                            }
                            $("#a" + x + "").click(tableff);
                        }
                        if (zongyeshu != 1) {
                            if (yeshu == 1) {
                                $("#shouyeli").prop({"class": "disabled"});
                                $("#shangyiyeli").prop({"class": "disabled"});
                                $("#moyeli").prop({"class": ""});
                                $("#xiayiyeli").prop({"class": ""});
                                $("#moye").click(tableff);
                                $("#xiayiye").click(tableff);
                            } else if (yeshu == zongyeshu) {
                                $("#moyeli").prop({"class": "disabled"});
                                $("#xiayiyeli").prop({"class": "disabled"});
                                $("#shouyeli").prop({"class": ""});
                                $("#shangyiyeli").prop({"class": ""});
                                $("#shouye").click(tableff);
                                $("#shangyiye").click(tableff);
                            } else {
                                $("#shouyeli").prop({"class": ""});
                                $("#shangyiyeli").prop({"class": ""});
                                $("#shouye").click(tableff);
                                $("#shangyiye").click(tableff);
                                $("#moyeli").prop({"class": ""});
                                $("#xiayiyeli").prop({"class": ""});
                                $("#moye").click(tableff);
                                $("#xiayiye").click(tableff);
                            }
                        } else {
                            $("#shouyeli").prop({"class": "disabled"});
                            $("#shangyiyeli").prop({"class": "disabled"});
                            $("#xiayiyeli").prop({"class": "disabled"});
                            $("#xiayiyeli").prop({"class": "disabled"});
                        }

                    }//加载收货信息table
                    tableff();
//收货地址 table*********************************************************************
// 收货地址 from start--------------------------------------------------------------
                    function insertIntoShouHuoDiZhi(zhuangtai) {
                        var jsonstr = {
                            option: "4",
                            yonghuming: "" + response.kehudenglu.yonghuming + "",
                            shouhuoren: "" + $("#shouhuorentext").val() + "",
                            suozaidiqu: "" + $("#suozaidiqutext").val() + "",
                            youbian: "" + $("#youbiantext").val() + "",
                            xiangxidizhi: "" + $("#xiangxidizhitext").val() + "",
                            lianxidianhua: "" + $("#lianxidianhuatext").val() + "",
                            zhuangtai: zhuangtai
                        };
                        $.ajax({
                            url: "/GeRenZiLiaoServlet",   // 请求路径
                            type: "post",            // 请求的方式，不区分大小写
                            async: false,             // 是否异步，true是默认值，false为同步请求
                            cache: false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                            contentType: "applicaton/json;charset=utf-8",
                            datatype: "json",        // 返回类型，text文本、html页面、json数据
                            data: JSON.stringify(jsonstr),
                            success: function (response) {//回调函数
                                function tableff() {
                                    var jsonArray = response.shouhuodizhi;//后端返回的shouhuodizhi收货地址表的jsonArray
                                    $("#mytbody").empty();
                                    $("li.yeshuli").remove();
                                    var thisid = $(this).prop("id");
                                    var thistext = $(this).text();
                                    var zongtiaoshu = jsonArray.length;
                                    var zongyeshu = Math.floor((zongtiaoshu - 1) / 5) + 1;//如果每页规定显示5条记录
                                    if (thisid != "" && thisid != null && thisid != "undefind") {
                                        if (thisid == "shouye") {
                                            yeshu = 1;
                                        } else if (thisid == "shangyiye") {
                                            yeshu = yeshu == 1 ? 1 : yeshu - 1;
                                        } else if (thisid == "xiayiye") {
                                            yeshu = yeshu == zongyeshu ? zongyeshu : yeshu + 1;
                                        } else if (thisid == "moye") {
                                            yeshu = zongyeshu;
                                        } else if (thisid == "tijiaobutton") {
                                            yeshu = 1;
                                        } else {
                                            yeshu = thistext;
                                        }
                                    }
                                    // 最有一页 i = 15 ; i< 20 ;i++  但是i的最大值小于 20。
                                    var iyeshu = 5 * yeshu > zongtiaoshu ? zongtiaoshu : 5 * yeshu;
                                    for (var i = (yeshu - 1) * 5; i < iyeshu; i++) {
                                        if (jsonArray[i].zhuangtai == 1) {//是默认地址 zhuangtai = 1
                                            $("#mytbody").append("<tr id='tdtr"+i+"'>" +
                                                "<td><input id='table_shouhuoren" + i + "' style='width: 70px;' class='form-control input-sm' type='text' value=" + jsonArray[i].shouhuoren + "></td>" +
                                                "<td><input id='table_suozaidiqu" + i + "' style='width: 70px;' class='form-control input-sm' type='text' value=" + jsonArray[i].suozaidiqu + "></td>" +
                                                "<td><input id='table_youbian" + i + "' style='width: 70px;' class='form-control input-sm' type='text' value=" + jsonArray[i].youbian + "></td>" +
                                                "<td><input id='table_lianxidianhua" + i + "' style='width: 100px;' class='form-control input-sm' type='text' value=" + jsonArray[i].lianxidianhua + "></td>" +
                                                "<td><input id='table_xiangxidizhi" + i + "' style='width: 160px;' class='form-control input-sm' type='text' value=" + jsonArray[i].xiangxidizhi + "></td>" +
                                                "<td><a id='xiugai" + i + "'>修改</a></td>" +
                                                "<td><a id='shanchu" + i + "'>删除</a></td>" +
                                                "<td>默认地址</td>" +
                                                "</tr>");
                                            $("#xiugai" + i + "").click(function () {
                                                var count = $(this).prop("id").substring(6);
                                                var json = {
                                                    option: "5",
                                                    yonghuming: "" + response.kehudenglu.yonghuming + "",
                                                    id: "" + jsonArray[count].id + "",
                                                    shouhuoren: "" + $("#table_shouhuoren" + count + "").val() + "",
                                                    suozaidiqu: "" + $("#table_suozaidiqu" + count + "").val() + "",
                                                    youbian: "" + $("#table_youbian" + count + "").val() + "",
                                                    xiangxidizhi: "" + $("#table_xiangxidizhi" + count + "").val() + "",
                                                    lianxidianhua: "" + $("#table_lianxidianhua" + count + "").val() + ""
                                                };
                                                $.ajax({
                                                    url: "/GeRenZiLiaoServlet",   // 请求路径
                                                    type: "post",            // 请求的方式，不区分大小写
                                                    async: true,             // 是否异步，true是默认值，false为同步请求
                                                    cache: false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                                                    contentType: "applicaton/json;charset=utf-8",
                                                    datatype: "json",        // 返回类型，text文本、html页面、json数据
                                                    data: JSON.stringify(json),
                                                    success: function (response) {//回调函数
                                                    },
                                                    error: function (response) {//回调函数
                                                    }
                                                });
                                            });//修改点击事件
                                            $("#shanchu" + i + "").click(function () {
                                                var count = $(this).prop("id").substring(7);
                                                var json = {
                                                    option: "6",
                                                    yonghuming: "" + response.kehudenglu.yonghuming + "",
                                                    id: "" + jsonArray[count].id + ""
                                                };
                                                $.ajax({
                                                    url: "/GeRenZiLiaoServlet",   // 请求路径
                                                    type: "post",            // 请求的方式，不区分大小写
                                                    async: true,             // 是否异步，true是默认值，false为同步请求
                                                    cache: false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                                                    contentType: "applicaton/json;charset=utf-8",
                                                    datatype: "json",        // 返回类型，text文本、html页面、json数据
                                                    data: JSON.stringify(json),
                                                    success: function (response) {//回调函数
                                                        $("#tdtr"+count+"").remove();
                                                    },
                                                    error: function (response) {//回调函数
                                                    }
                                                });
                                            });//删除点击事件
                                        } else {//不是默认地址 zhuangtai != 1
                                            $("#mytbody").append("<tr id='tdtr"+i+"'>" +
                                                "<td><input id='table_shouhuoren" + i + "' style='width: 70px;' class='form-control input-sm' type='text' value=" + jsonArray[i].shouhuoren + "></td>" +
                                                "<td><input id='table_suozaidiqu" + i + "' style='width: 70px;' class='form-control input-sm' type='text' value=" + jsonArray[i].suozaidiqu + "></td>" +
                                                "<td><input id='table_youbian" + i + "' style='width: 70px;' class='form-control input-sm' type='text' value=" + jsonArray[i].youbian + "></td>" +
                                                "<td><input id='table_lianxidianhua" + i + "' style='width: 100px;' class='form-control input-sm' type='text' value=" + jsonArray[i].lianxidianhua + "></td>" +
                                                "<td><input id='table_xiangxidizhi" + i + "' style='width: 160px;' class='form-control input-sm' type='text' value=" + jsonArray[i].xiangxidizhi + "></td>" +
                                                "<td><a id='xiugai" + i + "'>修改</a></td>" +
                                                "<td><a id='shanchu" + i + "'>删除</a></td>" +
                                                "<td id='shemotd"+i+"'><a id='shemo" + i + "'>设为默认</a></td>" +
                                                "</tr>");
                                            $("#xiugai" + i + "").click(function () {
                                                var count = $(this).prop("id").substring(6);
                                                var json = {
                                                    option: "5",
                                                    yonghuming: "" + response.kehudenglu.yonghuming + "",
                                                    id: "" + jsonArray[count].id + "",
                                                    shouhuoren: "" + $("#table_shouhuoren" + count + "").val() + "",
                                                    suozaidiqu: "" + $("#table_suozaidiqu" + count + "").val() + "",
                                                    youbian: "" + $("#table_youbian" + count + "").val() + "",
                                                    xiangxidizhi: "" + $("#table_xiangxidizhi" + count + "").val() + "",
                                                    lianxidianhua: "" + $("#table_lianxidianhua" + count + "").val() + ""
                                                };
                                                $.ajax({
                                                    url: "/GeRenZiLiaoServlet",   // 请求路径
                                                    type: "post",            // 请求的方式，不区分大小写
                                                    async: true,             // 是否异步，true是默认值，false为同步请求
                                                    cache: false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                                                    contentType: "applicaton/json;charset=utf-8",
                                                    datatype: "json",        // 返回类型，text文本、html页面、json数据
                                                    data: JSON.stringify(json),
                                                    success: function (response) {//回调函数
                                                    },
                                                    error: function (response) {//回调函数
                                                    }
                                                });
                                            });//修改点击事件
                                            $("#shanchu" + i + "").click(function () {
                                                var count = $(this).prop("id").substring(7);
                                                var json = {
                                                    option: "6",
                                                    yonghuming: "" + response.kehudenglu.yonghuming + "",
                                                    id: "" + jsonArray[count].id + ""
                                                };
                                                $.ajax({
                                                    url: "/GeRenZiLiaoServlet",   // 请求路径
                                                    type: "post",            // 请求的方式，不区分大小写
                                                    async: true,             // 是否异步，true是默认值，false为同步请求
                                                    cache: false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                                                    contentType: "applicaton/json;charset=utf-8",
                                                    datatype: "json",        // 返回类型，text文本、html页面、json数据
                                                    data: JSON.stringify(json),
                                                    success: function (response) {//回调函数
                                                        $("#tdtr"+count+"").remove();
                                                    },
                                                    error: function (response) {//回调函数
                                                    }
                                                });
                                            });//删除点击事件
                                            $("#shemo" + i + "").click(function () {
                                                var count = $(this).prop("id").substring(5);
                                                var json = {
                                                    option: "7",
                                                    yonghuming: "" + response.kehudenglu.yonghuming + "",
                                                    id: "" + jsonArray[count].id + "",
                                                    zhuangtai: 1
                                                };
                                                $.ajax({
                                                    url: "/GeRenZiLiaoServlet",   // 请求路径
                                                    type: "post",            // 请求的方式，不区分大小写
                                                    async: true,             // 是否异步，true是默认值，false为同步请求
                                                    cache: false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                                                    contentType: "applicaton/json;charset=utf-8",
                                                    datatype: "json",        // 返回类型，text文本、html页面、json数据
                                                    data: JSON.stringify(json),
                                                    success: function (response) {//回调函数
                                                        $("#shemotd"+count+"").html("<font color='#ff0045'>最新默认</font>");
                                                    },
                                                    error: function (response) {//回调函数
                                                    }
                                                });
                                            });//设为默认点击事件
                                        }
                                    }
                                    for (var x = 1; x < zongyeshu + 1; x++) {
                                        $("#xiayiyeli").before("<li class='yeshuli' id='yeshu" + x + "'><a class='' id='a" + x + "'>" + x + "</a></li>");
                                        if (x == yeshu) {
                                            $("#a" + x + "").html("<font color='#f64a4a'>" + x + "</font>");
                                        }
                                        $("#a" + x + "").click(tableff);
                                    }
                                    if (zongyeshu != 1) {
                                        if (yeshu == 1) {
                                            $("#shouyeli").prop({"class": "disabled"});
                                            $("#shangyiyeli").prop({"class": "disabled"});
                                            $("#moyeli").prop({"class": ""});
                                            $("#xiayiyeli").prop({"class": ""});
                                            $("#moye").click(tableff);
                                            $("#xiayiye").click(tableff);
                                        } else if (yeshu == zongyeshu) {
                                            $("#moyeli").prop({"class": "disabled"});
                                            $("#xiayiyeli").prop({"class": "disabled"});
                                            $("#shouyeli").prop({"class": ""});
                                            $("#shangyiyeli").prop({"class": ""});
                                            $("#shouye").click(tableff);
                                            $("#shangyiye").click(tableff);
                                        } else {
                                            $("#shouyeli").prop({"class": ""});
                                            $("#shangyiyeli").prop({"class": ""});
                                            $("#shouye").click(tableff);
                                            $("#shangyiye").click(tableff);
                                            $("#moyeli").prop({"class": ""});
                                            $("#xiayiyeli").prop({"class": ""});
                                            $("#moye").click(tableff);
                                            $("#xiayiye").click(tableff);
                                        }
                                    } else {
                                        $("#shouyeli").prop({"class": "disabled"});
                                        $("#shangyiyeli").prop({"class": "disabled"});
                                        $("#xiayiyeli").prop({"class": "disabled"});
                                        $("#xiayiyeli").prop({"class": "disabled"});
                                    }

                                }//加载收货信息table
                                tableff();
                            },
                            error: function (response) {//回调函数
                            }
                        });
                    }//shouhuodizhi表新增
                    function  selectIsExist() {
                       var isexist = 0;//0位不存在
                        var jsonstr = {option: "1",yonghuming: "" + gerenziliao_yonghuming + ""};
                        $.ajax({
                            url: "/GeRenZiLiaoServlet",   // 请求路径
                            type: "post",            // 请求的方式，不区分大小写
                            async: false,             // 是否异步，true是默认值，false为同步请求
                            cache: false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                            contentType: "applicaton/json;charset=utf-8",
                            datatype: "json",        // 返回类型，text文本、html页面、json数据
                            data: JSON.stringify(jsonstr),
                            success: function (response) {//回调函数
                                isexist = response.shouhuodizhi.length;
                            },
                            error: function (response) {//回调函数
                            }
                        });
                           return isexist;
                    };//查询是否已有默认地址
                    var xinzeng = $("#xinzeng");//新增按钮
                    xinzeng.click(function () {
                        if ($("#shouhuorentext").val() != "" &&
                            $("#shouhuorentext").val() != null &&
                            $("#suozaidiqutext").val() != "" &&
                            $("#suozaidiqutext").val() != null &&
                            $("#youbiantext").val() != "" &&
                            $("#youbiantext").val() != null &&
                            $("#xiangxidizhitext").val() != "" &&
                            $("#xiangxidizhitext").val() != null &&
                            $("#lianxidianhuatext").val() != "" &&
                            $("#lianxidianhuatext").val() != null) {
                            if (selectIsExist() != 0) {//判断之前是否已有收货地址 有
                                insertIntoShouHuoDiZhi(0);
                                $("#buquantishidiv").html(" ");
                            } else {//判断之前是否已有收货地址 没有
                                insertIntoShouHuoDiZhi(1);
                                $("#buquantishidiv").html(" ");
                            }
                        } else {
                            $("#buquantishidiv").html("<font color='#f64a4a'>请先完善收货信息!</font>");
                        }
                    });//新增按钮点击时
// 收货地址 from end----------------------------------------------------------------
                },
                error: function (response) {//回调函数
                }
            });
        }//根据yonghuming查询所有信息展示需要的相关字段值
        selectYongHuAndShouHuoDiZhi();//默认调用一次
        // 导航 start*******************************************************************
        var tabBasicinfo = $("#tabBasicinfo");//基本资料 导航栏
        var tabSurvey = $("#tabSurvey");//收货地址 导航栏
        var gerenziliaodiv = $("#gerenziliaodiv");//基本资料div
        var shouhuodizhidiv = $("#shouhuodizhidiv");//收货地址div
        var activeTabName = $("#activeTabName");//我的StartShopping > 账户设置 > ...
        //基本资料 导航栏
        tabBasicinfo.click(function () {
            gerenziliaodiv.prop({class: "accountBasicinfo tab-content active"});
            shouhuodizhidiv.prop({class: "accountSurvey tab-content"});
            tabBasicinfo.css({"color": "#333", "border-bottom": "2px solid #f10180"});
            tabSurvey.css({"color": "#999", "border-bottom": "2px solid #f9f9f9"});
            activeTabName.text("基本资料");
        });
        //收货地址 导航栏
        tabSurvey.click(function () {
            gerenziliaodiv.prop({class: "accountBasicinfo tab-content"});
            shouhuodizhidiv.prop({class: "accountSurvey tab-content active"});
            tabSurvey.css({"color": "#333", "border-bottom": "2px solid #f10180"});
            tabBasicinfo.css({"color": "#999", "border-bottom": "2px solid #f9f9f9"});
            activeTabName.text("收货地址");
        });
        // 导航 end*********************************************************************
        //个人资料 start****************************************************************
        // alert($("#gerenziliaofrom").serialize()) ;
        //头像 start--------------------------------------------------------------------
        var touxiangshangchuantijiao = $("#touxiangshangchuantijiao");//头像上传提交按钮
        var txtjgsspan = $("#touxiangtijiaogensui");//跟随头像上传提交按钮span
        touxiangshangchuantijiao.click(function () {
            // $("#fileuploadForm")返回是一个form的数组，就算只有一个form也是返回数组
            var formData = new FormData($("#fileuploadForm")[0]);     // 组装formdata数据上传对象
            $.ajax({
                url: "/TouXiangShangChuanServlet",       // 请求路径
                type: "post",                     // 请求的方式，不区分大小写
                async: false,             // 是否异步，true是默认值，false为同步请求
                cache: false,                     // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                datatype: "json",                // 返回类型，text文本、html页面、json数据
                processData: false,              // 重点:  上传文件必须修改为false，否则http会报错
                contentType: false,             // 重点:  上传文件必须修改为false，否则http会报错
                data: formData,// 上传的数据为formdata对象
                success: function (response) {
                    $("#touxiangimg").prop({"src": response.img_url});
                    txtjgsspan.click(function () {
                        var json = {
                            option: "2",
                            yonghuming: "" + gerenziliao_yonghuming + "",
                            touxiangdizhi: "" + response.img_url + ""
                        };
                        $.ajax({
                            url: "/GeRenZiLiaoServlet",   // 请求路径
                            type: "post",            // 请求的方式，不区分大小写
                            async: true,             // 是否异步，true是默认值，false为同步请求
                            cache: false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                            contentType: "application/json;charset=utf-8",
                            datatype: "json",        // 返回类型，text文本、html页面、json数据
                            data: JSON.stringify(json),
                            success: function (returnjson) {//回调函数
                            },
                            error: function (returnjson) {//回调函数
                            }
                        });
                    });//头像上传成功，将其写入数据库中对应的yonghu表
                    txtjgsspan.trigger("click");
                    touxiangshangchuantijiao.attr("data-dismiss", "modal");   // 关闭整个对话框
                },
                error: function (response) {
                }
            });

        });
        //头像 end----------------------------------------------------------------------
        // yonghu from start--------------------------------------------------------------
        var gerenziliaotijiao = $("#gerenziliaotijiao");//个人资料提交按钮
        gerenziliaotijiao.click(function () {
            var jsonstr = {
                option: "3",
                yonghuming: "" + $("#yonghumingtext").val() + "",
                nicheng: "" + $("#nichengtext").val() + "",
                xingming: "" + $("#xingmingtext").val() + "",
                xingbie: "" + $("input.radio").val() + "",
                chushengriqi: "" + $("#chushengriqitext").val() + "",
                xingzuo: "" + $("#xingzuo").val() + "",
                jvzhudi: "" + $("#jvzhuditext").val() + "",
                jiaxiang: "" + $("#jiaxiangtext").val() + "",
            };
            $.ajax({
                url: "/GeRenZiLiaoServlet",   // 请求路径
                type: "post",            // 请求的方式，不区分大小写
                async: true,             // 是否异步，true是默认值，false为同步请求
                cache: false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
                contentType: "applicaton/json;charset=utf-8",
                datatype: "json",        // 返回类型，text文本、html页面、json数据
                data: JSON.stringify(jsonstr),
                success: function (response) {//回调函数
                    selectYongHuAndShouHuoDiZhi();
                },
                error: function (response) {//回调函数
                }
            });
        });
        // yonghu from end----------------------------------------------------------------
        //个人资料 end******************************************************************
    });
</script>
</html>
